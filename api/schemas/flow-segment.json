{
    "type": "object",
    "description": "Provides the location and metadata of the media files corresponding to timerange segments of a Flow.",
    "title": "Flow Segment",
    "allOf":
    [
        {
            "type": "object",
            "required":
            [
                "object_id",
                "timerange"
            ],
            "properties":
            {
                "object_id":
                {
                    "description": "The object store identifier for the Media Object.",
                    "type": "string"
                },
                "ts_offset":
                {
                    "description": "The timestamp offset between the sample timestamps stored in the media file and the corresponding timestamp in the Segment, ie. ts_offset = segment ts - media object ts. Assumed to be 0:0 if not set. Format as described by the [Timestamp](../schemas/timestamp#top) type",
                    "$ref": "timestamp.json"
                },
                "timerange":
                {
                    "description": "The timerange for the samples contained in the Segment. The timerange start is always inclusive. If samples have a duration then the timerange end is exclusive and covers at least the duration of the last sample. The exclusive timerange end will typically be set to the timestamp of the next sample. If the samples don't have a duration then the timerange end is inclusive. Format is described by the [TimeRange](../schemas/timerange#top) type. Note that where temporal re-ordering is used, the timerange and samples refers to the presentation timeline.",
                    "$ref": "timerange.json"
                },
                "last_duration":
                {
                    "description": "The difference between the exclusive end of the `timerange` and the last sample timestamp. Format as described by the [Timestamp](../schemas/timestamp#top) type, but cannot be negative",
                    "$ref": "timestamp.json"
                },
                "object_timerange": {
                    "description": "The timerange found inside the media object itself, on the media object's timeline",
                    "$ref": "timerange.json"
                },
                "sample_offset":
                {
                    "description": "The start of the Segment represented as a count of samples from the start of the Media Object. Note that a sample is a video frame or audio sample. A (coded) audio frame has multiple audio samples. Assumed to be 0 if not set. DEPRECATED: Use object_timerange instead - see AppNote 0036. Service implementations SHOULD continue to store and return it if set.",
                    "type": "integer",
                    "deprecated": true
                },
                "sample_count":
                {
                    "description": "The count of samples in the Segment (which may be fewer than in the Media Object). The count could be less than expected given the Segment duration and rate if there are gaps. If not set, every sample from sample_offset onwards is used. Note that a sample is a video frame or audio sample. A (coded) audio frame has multiple audio samples. DEPRECATED: Use object_timerange instead - see AppNote 0036. Service implementations SHOULD continue to store and return it if set.",
                    "type": "integer",
                    "deprecated": true
                }
            }
        },
        {
            "$ref": "object-core.json"
        }
    ]
}